name: Hello-World Medperf Metrics MLCube
description: MLCommons demonstration MLCube for writing metrics for MedPerf
authors:
 - {name: "MLCommons Medical Working Group"}

platform:
  accelerator_count: 0

docker:
  # Image name.
  image: mlcommons/hello-world-metrics
  # Docker build context relative to $MLCUBE_ROOT. Default is `build`.
  build_context: "../project"
  # Docker file name within docker build context, default is `Dockerfile`.
  build_file: "Dockerfile"

tasks:
  # Metrics MLCubes require only a single task: `evaluate`
  # This tast takes the predictions generated by the model mlcube (as a directory)
  # and the output of the Data Preparation MLCube containing the labels (as a directory)
  # to compute metrics, which are then stored inside the output_path 
  evaluate:
  # Executes a number of metrics specified by the params file
    parameters:
      inputs: {
        predictions: predictions,                            # Required. Where to find the predictions. MUST be a folder
        labels: labels,                                      # Required. Where to find the labels. MUST be a folder
        parameters_file: parameters.yaml                     # Required. Helper file to provide additional arguments. Value MUST be parameters.yaml
        # If you need any additional files that should 
        # not be included inside the mlcube image, 
        # add them inside `additional_files` folder
        }
      outputs: {
        output_path: {type: "file", default: "results.yaml"} # Required. Where to write the metrics results. Value MUST be results.yaml
        }